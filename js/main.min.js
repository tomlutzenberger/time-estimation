/*!
 * Time Estimation v0.4
 * Calculate your tasks with PERT
 *
 * Copyright (c) 2016 - Tom Lutzenberger (lutzenbergerthomas at gmail dot com)
 * https://github.com/tomlutzenberger/time-estimation
 *
 * Released under the MIT license
 * https://github.com/tomlutzenberger/time-estimation/LICENSE
 * https://tomlutzenberger.github.io/time-estimation/
 */
function TimeEstimation(){'use strict';this.n=null,this.o=null,this.p=null,this.title=null,this.resultMu=null,this.resultSigma=null}TimeEstimation.prototype={constructor:TimeEstimation,isValidValue:function(a){'use strict';var b=!1;return''!==a&&a>0?b=!0:(console.warn('Given value "'+a+'" is not a valid number.'),b=!1),b},isFormComplete:function(){'use strict';return!!(this.isValidValue(this.o)&&this.isValidValue(this.n)&&this.isValidValue(this.p))},getValues:function(){'use strict';this.title=$('.te-title').val(),this.n=parseFloat($('.te-n').val()),this.o=parseFloat($('.te-o').val()),this.p=parseFloat($('.te-p').val())},setValues:function(){'use strict';$('.te-title').val(this.title),$('.te-n').val(this.n),$('.te-o').val(this.o),$('.te-p').val(this.p)},parseUrlParams:function(){'use strict';var a=new RegExp('\\?(.*)','i'),b=a.exec(location.search);return null!==b&&b.length>1&&b[1].split('&')},getUrlParams:function(){'use strict';var a=this.parseUrlParams(),b=null,c=null;if(a!==!1){for(b in a)a.hasOwnProperty(b)&&(c=a[b].split('='),this[c[0].toLowerCase()]=decodeURIComponent(c[1]));return this.setValues(),!0}return console.info('No URL parameters to read'),!1},setUrlParams:function(){'use strict';var a='?title='+encodeURIComponent(this.title)+'&o='+this.o+'&n='+this.n+'&p='+this.p;history.pushState(null,null,a)},calculateResult:function(){'use strict';this.resultMu=(this.o+4*this.n+this.p)/6,this.resultSigma=(this.p-this.o)/6},setResult:function(){'use strict';$('.result-mu').text(this.resultMu.toFixed(2)),$('.result-sigma').text(this.resultSigma.toFixed(2))},unsetResult:function(){'use strict';$('.result-mu').text(''),$('.result-sigma').text('')}},$(document).ready(function(){'use strict';var a=new TimeEstimation;a.getUrlParams()&&(a.calculateResult(),a.setResult()),$('.te').on('change',function(){a.getValues(),a.isFormComplete()?(a.calculateResult(),a.setResult(),a.setUrlParams()):a.unsetResult()})});